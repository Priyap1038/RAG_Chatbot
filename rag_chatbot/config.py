# config.py  â€”  All application settings (production-ready)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import os
from dotenv import load_dotenv

load_dotenv()

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”€  PROVIDER SWITCH  (one line)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LLM_PROVIDER = "ollama"   # "ollama" or "openai"

# â”€â”€ OpenAI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
OPENAI_API_KEY: str        = os.getenv("OPENAI_API_KEY", "")
OPENAI_CHAT_MODEL: str     = "gpt-3.5-turbo"
OPENAI_EMBED_MODEL: str    = "text-embedding-3-small"
OPENAI_EMBED_DIM: int      = 1536
OPENAI_TEMPERATURE: float  = 0.0

# â”€â”€ Ollama â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
OLLAMA_CHAT_MODEL: str     = "llama3.2:1b"
OLLAMA_EMBED_MODEL: str    = "nomic-embed-text:latest"
OLLAMA_EMBED_DIM: int      = 768
OLLAMA_TEMPERATURE: float  = 0.1

# â”€â”€ Active settings (auto-selected) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if LLM_PROVIDER == "openai":
    EMBEDDING_MODEL     = OPENAI_EMBED_MODEL
    EMBEDDING_DIMENSION = OPENAI_EMBED_DIM
    CHAT_TEMPERATURE    = OPENAI_TEMPERATURE
else:
    EMBEDDING_MODEL     = OLLAMA_EMBED_MODEL
    EMBEDDING_DIMENSION = OLLAMA_EMBED_DIM
    CHAT_TEMPERATURE    = OLLAMA_TEMPERATURE

# â”€â”€ Pinecone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PINECONE_API_KEY: str    = os.getenv("PINECONE_API_KEY", "")
PINECONE_INDEX_NAME: str = os.getenv("PINECONE_INDEX_NAME", "priya-rag-index")

# â”€â”€ Persistence paths â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
_BASE_DIR    = os.path.dirname(__file__)
DB_PATH: str     = os.getenv("DB_PATH",     os.path.join(_BASE_DIR, "sessions.db"))
CORPUS_PATH: str = os.getenv("CORPUS_PATH", os.path.join(_BASE_DIR, "bm25_corpus.json"))

# â”€â”€ Chunking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CHUNK_SIZE: int    = 1200
CHUNK_OVERLAP: int = 150

# â”€â”€ Retrieval â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOP_K: int                  = 2
SIMILARITY_THRESHOLD: float = 0.55

# â”€â”€ Memory â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MEMORY_WINDOW: int = 3

# â”€â”€ Security â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# If set, all /api/* requests must include:
#   Authorization: Bearer <API_KEY>
# Leave blank to disable auth (development mode).
API_KEY: str = os.getenv("API_KEY", "")

# Comma-separated list of allowed CORS origins.
# Example: "https://myapp.com,https://www.myapp.com"
# Use "*" only in development.
CORS_ORIGINS: list[str] = [
    o.strip() for o in os.getenv("CORS_ORIGINS", "*").split(",")
]

# â”€â”€ Logging â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
LOG_LEVEL: str = os.getenv("LOG_LEVEL", "INFO")

# â”€â”€ Rate limiting â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RATE_LIMIT: str = os.getenv("RATE_LIMIT", "30/minute")
